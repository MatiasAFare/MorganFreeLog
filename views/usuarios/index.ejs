<!DOCTYPE html>
<html>
  <head>
    <title>Listado de Usuarios</title>
    <link rel="stylesheet" href="/css/style.css" />
    <style>
      .header {
        text-align: center;
        margin-bottom: 30px;
      }
      
      .header h1 {
        margin: 0 0 20px 0;
        color: var(--text-primary, #333);
        font-size: 2.5em;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
      }
      
      .logo {
        width: 300px;
        height: 200px;
        object-fit: contain;
        border-radius: 15px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        padding: 10px;
        margin: 0 auto;
        display: block;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="header">
        <h1>Listado de Usuarios</h1>
        <img src="/morganshop.png" alt="MorganShop Logo" class="logo" />
      </div>

      <% if (error) { %>
      <div class="alert alert-danger"><%= error %></div>
      <% } %>

      <div class="actions">
        <a href="/usuarios/new" class="btn btn-primary">Nuevo Usuario</a>
        <a href="/" class="btn btn-secondary">Volver al Inicio</a>
      </div>

      <table class="table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Email</th>
            <th>Rol</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <% users.forEach(user=> { %>
          <tr>
            <td><%= user.id %></td>
            <td><%= user.name %></td>
            <td><%= user.email %></td>
            <td><%= user.rol_nombre || 'Sin rol asignado' %></td>
            <td class="actions">
              <a href="/usuarios/<%= user.id %>" class="btn btn-sm btn-info"
                >Ver</a
              >
              <a
                href="/usuarios/<%= user.id %>/edit"
                class="btn btn-sm btn-warning"
                >Editar</a
              >
              <form
                action="/usuarios/<%= user.id %>/delete"
                method="POST"
                style="display: inline"
              >
                <button
                  type="submit"
                  class="btn btn-sm btn-danger"
                  onclick="return confirm('¿Está seguro que desea eliminar este usuario?')"
                >
                  Eliminar
                </button>
              </form>
            </td>
          </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
  </body>
</html>
